!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.way=e()}(this,function(){"use strict";var t,e,r="way",n=function(){this._watchers={},this._watchersAll={}};n.prototype.constructor=n,n.prototype.watchAll=function(t){this._watchersAll=this._watchersAll||[],p.contains(this._watchersAll,t)||this._watchersAll.push(t)},n.prototype.watch=function(t,e){this._watchers||(this._watchers={}),this._watchers[t]=this._watchers[t]||[],this._watchers[t].push(e)},n.prototype.findWatcherDeps=function(t){var e=[];return p.keys(this._watchers).forEach(function(r){a(t,r)&&e.push(r)}),e},n.prototype.emitChange=function(t){this._watchers||(this._watchers={});var e=this;e.findWatcherDeps(t).forEach(function(t){e._watchers[t]&&e._watchers[t].forEach(function(r){r.apply(e,[e.get(t)])})}),e._watchersAll&&p.isArray(e._watchersAll)&&e._watchersAll.forEach(function(r){p.isFunction(r)&&r.apply(e,[t,e.get(t)])})};var o=function(){this.data={},this._bindings={},this.options={persistent:!0,timeoutInput:50,timeoutDOM:500}};o.prototype=Object.create(n.prototype),o.constructor=o,o.prototype.dom=function(t){return this._element=e.dom(t).get(0),this},o.prototype.toStorage=function(t,e){var r=this,n=(e=e||r._element,t=t||r.dom(e).getOptions(),r.dom(e).toJSON(t)),o=r.dom(e).scope(),i=o?o+"."+t.data:t.data;return!t.readonly&&void r.set(i,n,t)},o.prototype.toJSON=function(t,e){e=e||this._element;var r=this.dom(e).getValue();t=t||this.dom(e).getOptions();return p.isArray(t.pick)&&(r=c(r,t.pick,!0)),p.isArray(t.omit)&&(r=c(r,t.omit,!1)),r},o.prototype.fromStorage=function(t,e){var r=this;e=e||r._element;if((t=t||r.dom(e).getOptions()).writeonly)return!1;var n=r.dom(e).scope(),o=n?n+"."+t.data:t.data,i=r.get(o);r.dom(e).fromJSON(i,t)},o.prototype.fromJSON=function(t,e,r){var n=this;r=r||n._element;if((e=e||n.dom(r).getOptions()).writeonly)return!1;if(p.isObject(t)){p.isArray(e.pick)&&(t=c(t,e.pick,!0)),p.isArray(e.omit)&&(t=c(t,e.omit,!1));var o=p.isObject(n.dom(r).toJSON())?n.dom(r).toJSON():{};t=p.extend(o,t)}e.json&&(t=A.isStringified(t)?t:A.prettyprint(t)),n.dom(r).setValue(t,e)},o.prototype.getValue=function(t){t=t||this._element;return({SELECT:function(){return e.dom(t).val()},INPUT:function(){var r=e.dom(t).type();return p.contains(["text","password"],r)?e.dom(t).val():p.contains(["checkbox","radio"],r)?e.dom(t).prop("checked")?e.dom(t).val():null:void 0},TEXTAREA:function(){return e.dom(t).val()}}[e.dom(t).get(0).tagName]||function(){return e.dom(t).html()})()},o.prototype._transforms={uppercase:function(t){return p.isString(t)?t.toUpperCase():t},lowercase:function(t){return p.isString(t)?t.toLowerCase():t},reverse:function(t){return t&&t.split&&p.isFunction(t.split)?t.split("").reverse().join(""):t}},o.prototype.registerTransform=function(t,e){p.isFunction(e)&&(this._transforms[t]=e)},o.prototype.setValue=function(t,r,n){var o=this;n=n||o._element;(r=r||o.dom(n).getOptions()).transform=r.transform||[],r.transform.forEach(function(e){var r=o._transforms[e]||function(t){return t};t=r(t)});(({SELECT:function(t){e.dom(n).val(t)},INPUT:function(t){p.isString(t)||(t=JSON.stringify(t));var r=e.dom(n).get(0).type;p.contains(["text","password"],r)&&e.dom(n).val(t||""),p.contains(["checkbox","radio"],r)&&(t===e.dom(n).val()?e.dom(n).prop("checked",!0):e.dom(n).prop("checked",!1))},TEXTAREA:function(t){p.isString(t)||(t=JSON.stringify(t)),e.dom(n).val(t||"")},PRE:function(t){r.html?e.dom(n).html(t):e.dom(n).text(t)},IMG:function(t){if(!t)return t=r.default||"",e.dom(n).attr("src",t),!1;var o,i;o=t,i=function(o){e.dom(n).removeClass("way-loading"),o?e.dom(n).removeClass("way-error").addClass("way-success"):(t?e.dom(n).addClass("way-error"):e.dom(n).removeClass("way-error").removeClass("way-success"),t=r.default||""),e.dom(n).attr("src",t)},e.dom(n).addClass("way-loading"),e.dom("img",{src:o,onerror:function(){i(!1)},onload:function(){i(!0)}})}})[e.dom(n).get(0).tagName]||function(t){r.html?e.dom(n).html(t):e.dom(n).text(t)})(t)},o.prototype.setDefault=function(t,e,r){var n=this;r=r||n._element,t=t||!1;return!!(e=e?p.extend(n.dom(r).getOptions(),e):n.dom(r).getOptions()).default&&void(t?n.set(e.data,e.default,e):n.dom(r).setValue(e.default,e))},o.prototype.setDefaults=function(){var t=e.dom("[way-default]").get();for(var r in t){var n=t[r],o=this.dom(n).getOptions().data||null;(o?this.get(o):null)||this.dom(n).setDefault()}},o.prototype.registerBindings=function(){var t=this,r="[way-data]";t._bindings={};var n=e.dom(r).get();for(var o in n){var i=n[o],a=t.dom(i).getOptions(),s=t.dom(i).scope();r=s?s+"."+a.data:a.data;t._bindings[r]=t._bindings[r]||[],p.contains(t._bindings[r],e.dom(i).get(0))||t._bindings[r].push(e.dom(i).get(0))}},o.prototype.updateBindings=function(t){var r=this;r._bindings=r._bindings||{},l(r._bindings,t).forEach(function(t){e.dom(t).get(0)===e.dom(":focus").get(0)||r.dom(t).fromStorage()}),r._bindings.__all__&&r._bindings.__all__.forEach(function(t){r.dom(t).fromJSON(r.data)})},o.prototype.registerRepeats=function(){var t=this;t._repeats=t._repeats||{},t._repeatsCount=t._repeatsCount||0;var n=e.dom("[way-repeat]").get();for(var o in n){var i=n[o],a=t.dom(i).getOptions();t._repeats[a.repeat]=t._repeats[a.repeat]||[];var s=r+'-repeat-wrapper="'+t._repeatsCount+'"';if(!e.dom(i).parent("["+s+"]").length){t._repeats[a.repeat].push({id:t._repeatsCount,element:e.dom(i).clone(!0).removeAttr(r+"-repeat").removeAttr(r+"-filter").get(0),selector:a.repeat,filter:a.filter});var u=document.createElement("div");e.dom(u).attr(r+"-repeat-wrapper",t._repeatsCount),e.dom(u).attr(r+"-scope",a.repeat),a.filter&&e.dom(u).attr(r+"-filter",a.filter),e.dom(i).replaceWith(u),t.updateRepeats(a.repeat),t._repeatsCount++}}},o.prototype.updateRepeats=function(t){var n=this;n._repeats=n._repeats||{},l(n._repeats,t).forEach(function(t){var o='[way-repeat-wrapper="'+t.id+'"]',i=n.get(t.selector),a=[];t.filter=t.filter||[],e.dom(o).empty();for(var s in i){e.dom(t.element).attr(r+"-scope",s);var u=e.dom(t.element).get(0).outerHTML;u=u.replace(/\$\$key/gi,s),a.push(u)}e.dom(o).html(a.join("")),n.registerBindings(),n.updateBindings()})},o.prototype.updateForms=function(){var t="form[way-data]",n=e.dom(t).get();for(var o in n){var i=n[o],a=this.dom(i).getOptions(),u=a.data;e.dom(i).removeAttr(r+"-data");var c=e.dom(i).find("[name]").reverse().get();for(var o in c){var l=c[o],p=e.dom(l).attr("name");if(s(p,"[]")){var f=p.split("[]")[0],d="[name^='"+f+"']";p=f+"."+e.dom(i).find(d).get().length}t=u+"."+p;a.data=t,this.dom(l).setOptions(a),e.dom(l).removeAttr("name")}}},o.prototype.registerDependencies=function(){this.registerBindings(),this.registerRepeats()},o.prototype.updateDependencies=function(t){this.updateBindings(t),this.updateRepeats(t),this.updateForms(t)},o.prototype.setOptions=function(t,n){n=this._element||n;for(var o in t){var i=r+"-"+o,a=t[o];e.dom(n).attr(i,a)}},o.prototype.getOptions=function(t){t=t||this._element;return p.extend({data:null,html:!1,readonly:!1,writeonly:!1,persistent:!1},this.dom(t).getAttrs(r))},o.prototype.getAttrs=function(t,r){r=r||this._element;var n={};return[].slice.call(e.dom(r).get(0).attributes).forEach(function(e){var r,o;if(!(!t||!a(e.name,t+"-"))){var i=t?e.name.slice(t.length+1,e.name.length):e.name,s=(r=i,o=e.value,({array:function(t){return t.split(",")},boolean:function(t){return"true"===t||"false"!==t}}[{pick:"array",omit:"array",readonly:"boolean",writeonly:"boolean",json:"boolean",html:"boolean",persistent:"boolean"}[r]||null]||function(){return o})(o));p.contains(["transform","filter"],i)&&(s=s.split("|")),n[i]=s}}),n},o.prototype.scope=function(t,n){n=n||this._element;var o=r+"-scope",i=r+"-scope-break",a=[],s=e.dom(n).parents("[way-scope-break], [way-scope]").get();for(var u in s){var c=s[u];if(e.dom(c).attr(i))break;var l=e.dom(c).attr(o);a.unshift(l)}return e.dom(n).attr(o)&&a.push(e.dom(n).attr(o)),e.dom(n).attr(i)&&(a=[]),p.compact(a).join(".")},o.prototype.get=function(t){return!(void 0!==t&&!p.isString(t))&&(this.data?t?A.get(this.data,t):this.data:{})},o.prototype.set=function(t,e,r){if(!t)return!1;if("this"===t.split(".")[0])return console.log('Sorry, "this" is a reserved word in way.js'),!1;var n=this;if(r=r||{},t){if(!p.isString(t))return!1;n.data=n.data||{},n.data=t?A.set(n.data,t,e):{},n.updateDependencies(t),n.emitChange(t,e),r.persistent&&n.backup(t)}},o.prototype.push=function(t,e,r){if(!t)return!1;var n=this;r=r||{},t&&(n.data=t?A.push(n.data,t,e,!0):{}),n.updateDependencies(t),n.emitChange(t,null),r.persistent&&n.backup(t)},o.prototype.remove=function(t,e){var r=this;e=e||{},r.data=t?A.remove(r.data,t):{},r.updateDependencies(t),r.emitChange(t,null),e.persistent&&r.backup(t)},o.prototype.clear=function(){this.remove(null,{persistent:!0})},o.prototype.backup=function(){if(this.options.persistent)try{var t=this.data||{};localStorage.setItem(r,JSON.stringify(t))}catch(t){console.log("Your browser does not support localStorage.")}},o.prototype.restore=function(){if(this.options.persistent)try{var t=localStorage.getItem(r);try{t=JSON.parse(t);for(var e in t)this.set(e,t[e])}catch(t){}}catch(t){console.log("Your browser does not support localStorage.")}};var i=function(t,e){var r=["matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],n=null;for(var o in r)if(n=r[o],p.isFunction(t[n]))return t[n](e);return!1},a=function(t,e){return""===e||null!==t&&null!==e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(0,e.length)===e)},s=function(t,e){return""===e||null!==t&&null!==e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(t.length-e.length,t.length)===e)},u=function(t,e,r){return p.keys(t).forEach(function(n){r?a(n,e)||delete t[n]:a(n,e)&&delete t[n]}),t},c=function(t,e,r){var n=A.flatten(t);for(var o in e)n=u(n,e[o],r);var i,a=A.unflatten(n);return i=a,p.pick(i,p.compact(p.keys(i)))},l=function(t,e){var r=[];if(e){var n=e.split("."),o=n[n.length-1];if(!isNaN(o))n.pop(),r=t[i=n.join(".")]?p.union(r,t[i]):r;for(var i in t)a(i,e)&&(r=p.union(r,t[i]))}else for(var i in t)r=p.union(r,t[i]);return r},p={},f=Array.prototype,d=Object.prototype,h=Function.prototype,m=(Array.isArray,Object.keys),v=(h.bind,f.push),g=f.slice,y=f.concat,_=d.toString,w=d.hasOwnProperty,b=function(t,e,r,n){if(e&&p.every(t,p.isArray))return y.apply(n,t);for(var o=0,i=t.length;i>o;o++){var a=t[o];p.isArray(a)||p.isArguments(a)?e?v.apply(n,a):b(a,e,r,n):r||n.push(a)}return n},S=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)}}return function(){return t.apply(e,arguments)}};p.compact=function(t){return p.filter(t,p.identity)},p.filter=function(t,e,r){var n=[];return null==t?n:(e=p.iteratee(e,r),p.each(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n)},p.identity=function(t){return t},p.every=function(t,e,r){if(null==t)return!0;e=p.iteratee(e,r);var n,o,i=t.length!==+t.length&&p.keys(t),a=(i||t).length;for(n=0;a>n;n++)if(o=i?i[n]:n,!e(t[o],o,t))return!1;return!0},p.union=function(){return p.uniq(b(arguments,!0,!0,[]))},p.uniq=function(t,e,r,n){if(null==t)return[];p.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=p.iteratee(r,n));for(var o=[],i=[],a=0,s=t.length;s>a;a++){var u=t[a];if(e)a&&i===u||o.push(u),i=u;else if(r){var c=r(u,a,t);p.indexOf(i,c)<0&&(i.push(c),o.push(u))}else p.indexOf(o,u)<0&&o.push(u)}return o},p.pick=function(t,e,r){var n,o={};if(null==t)return o;if(p.isFunction(e)){e=S(e,r);for(n in t){var i=t[n];e(i,n,t)&&(o[n]=i)}}else{var a=y.apply([],g.call(arguments,1));t=new Object(t);for(var s=0,u=a.length;u>s;s++)n=a[s],n in t&&(o[n]=t[n])}return o},p.has=function(t,e){return null!=t&&w.call(t,e)},p.keys=function(t){if(!p.isObject(t))return[];if(m)return m(t);var e=[];for(var r in t)p.has(t,r)&&e.push(r);return e},p.contains=function(t,e){return null!=t&&(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.sortedIndex=function(t,e,r,n){for(var o=(r=p.iteratee(r,n,1))(e),i=0,a=t.length;a>i;){var s=i+a>>>1;r(t[s])<o?i=s+1:a=s}return i},p.property=function(t){return function(e){return e[t]}},p.iteratee=function(t,e,r){return null==t?p.identity:p.isFunction(t)?S(t,e,r):p.isObject(t)?p.matches(t):p.property(t)},p.pairs=function(t){for(var e=p.keys(t),r=e.length,n=Array(r),o=0;r>o;o++)n[o]=[e[o],t[e[o]]];return n},p.matches=function(t){var e=p.pairs(t),r=e.length;return function(t){if(null==t)return!r;t=new Object(t);for(var n=0;r>n;n++){var o=e[n],i=o[0];if(o[1]!==t[i]||!(i in t))return!1}return!0}},p.indexOf=function(t,e,r){if(null==t)return-1;var n=0,o=t.length;if(r){if("number"!=typeof r)return n=p.sortedIndex(t,e),t[n]===e?n:-1;n=0>r?Math.max(0,o+r):r}for(;o>n;n++)if(t[n]===e)return n;return-1},p.values=function(t){for(var e=p.keys(t),r=e.length,n=Array(r),o=0;r>o;o++)n[o]=t[e[o]];return n},p.extend=function(t){if(!p.isObject(t))return t;for(var e,r,n=1,o=arguments.length;o>n;n++){e=arguments[n];for(r in e)w.call(e,r)&&(t[r]=e[r])}return t},p.isArray=function(t){return"[object Array]"===_.call(t)},p.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===_.call(t)},p.isUndefined=function(t){return void 0===t},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each=function(t,e,r){if(null==t)return t;e=S(e,r);var n,o=t.length;if(o===+o)for(n=0;o>n;n++)e(t[n],n,t);else{var i=p.keys(t);for(n=0,o=i.length;o>n;n++)e(t[i[n]],i[n],t)}return t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return _.call(e)==="[object "+t+"]"}});var O=function(t,e,r,n){var o,i=e.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),a=0,s=i.length;if(arguments.length>2){for(o=t,s--;s>a;)e=i[a++],t=t[e]=p.isObject(t[e])?t[e]:{};n?p.isArray(t)?t.splice(i[a],1):delete t[i[a]]:t[i[a]]=r,r=o}else{for(;null!=(t=t[i[a++]])&&s>a;);r=s>a?void 0:t}return r},A={VERSION:"0.1.0",debug:!0,exit:function(t,e,r,n){if(A.debug){var o={noJSON:"Not a JSON",noString:"Not a String",noArray:"Not an Array",missing:"Missing argument"},i={source:t,data:r,value:n};i.message=o[e]?o[e]:"No particular reason",console.log("Error",i)}},is:function(t){return"[object Object]"==_.call(t)},isStringified:function(t){var e=!1;try{e=/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}catch(t){}return e},get:function(t,e){return void 0==t?A.exit("get","missing","json",t):void 0==e?A.exit("get","missing","selector",e):p.isString(e)?O(t,e):A.exit("get","noString","selector",e)},set:function(t,e,r){return void 0==t?A.exit("set","missing","json",t):void 0==e?A.exit("set","missing","selector",e):p.isString(e)?r?O(t,e,r):A.remove(t,e):A.exit("set","noString","selector",e)},remove:function(t,e){return void 0==t?A.exit("remove","missing","json",t):void 0==e?A.exit("remove","missing","selector",e):p.isString(e)?O(t,e,null,!0):A.exit("remove","noString","selector",e)},push:function(t,e,r,n){if(void 0==t)return A.exit("push","missing","json",t);if(void 0==e)return A.exit("push","missing","selector",e);var o=A.get(t,e);if(!p.isArray(o)){if(!n)return A.exit("push","noArray","array",o);o=[]}return o.push(r),A.set(t,e,o)},unshift:function(t,e,r){if(void 0==t)return A.exit("unshift","missing","json",t);if(void 0==e)return A.exit("unshift","missing","selector",e);if(void 0==r)return A.exit("unshift","missing","value",r);var n=A.get(t,e);return p.isArray(n)?(n.unshift(r),A.set(t,e,n)):A.exit("unshift","noArray","array",n)},flatten:function(t){if("Object"!=t.constructor.name)return A.exit("flatten","noJSON","json",t);var e={};return function t(r,n){if(Object(r)!==r)e[n]=r;else if(Array.isArray(r))for(var o=0,i=r.length;i>o;o++)t(r[o],n?n+"."+o:""+o),0==i&&(e[n]=[]);else{var a=!0;for(var s in r)a=!1,t(r[s],n?n+"."+s:s);a&&(e[n]={})}}(t,""),e},unflatten:function(t){if(Object(t)!==t||Array.isArray(t))return t;var e,r,n,o,i,a={};for(var s in t){e=a,r="",o=0;do{n=s.indexOf(".",o),i=s.substring(o,-1!==n?n:void 0),e=e[r]||(e[r]=isNaN(parseInt(i))?{}:[]),r=i,o=n+1}while(n>=0);e[r]=t[s]}return a[""]},prettyprint:function(t){return JSON.stringify(t,void 0,2)}},x=function(){};x.constructor=x,x.prototype.dom=function(t,e){var r=[];if(!e)return p.isString(t)?r=[].slice.call(document.querySelectorAll(t)):p.isObject(t)&&t.attributes&&(r=[t]),this._elements=r,this.length=r.length,this;var n=document.createElement(t);for(var o in e)n[o]=e[o]},x.prototype.on=function(t,e){var r=this._elements;t=t.split(" ");for(var n=0,o=r.length;o>n;n++)for(var i=r[n],a=0,s=t.length;s>a;a++)i.addEventListener&&i.addEventListener(t[a],e,!1)},x.prototype.find=function(t){var e=this.get(0),r=[];return p.isString(t)&&(r=[].slice.call(e.querySelectorAll(t))),this._elements=r,this},x.prototype.get=function(t,e){var r=this._elements||[],n=r[t]||{};return e?(this._element=n,this):p.isNumber(t)?n:r},x.prototype.reverse=function(){return this._elements=this._elements.reverse(),this},x.prototype.val=function(t){return this.prop("value",t)},x.prototype.type=function(t){return this.prop("type",t)},x.prototype.html=function(t){return this.prop("innerHTML",t)},x.prototype.text=function(t){return this.prop("innerHTML",(e=t)&&p.isString(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e);var e},x.prototype.prop=function(t,e){var r=this._elements;for(var n in r){if(p.isUndefined(e))return r[n][t];r[n][t]=e}},x.prototype.attr=function(t,e){var r=this._elements;for(var n in r){if(void 0===e)return r[n].getAttribute(t);r[n].setAttribute(t,e)}return this},x.prototype.removeAttr=function(t){for(var e in this._elements)this._elements[e].removeAttribute(t);return this},x.prototype.addClass=function(t){for(var e in this._elements)this._elements[e].classList.add(t);return this},x.prototype.removeClass=function(t){for(var e in this._elements)this._elements[e].classList.remove(t);return this},x.prototype.parents=function(t){for(var e=this.get(0).parentNode,r=[];null!==e;){var n=e,o=i(n,t),a=void 0===n.doctype;t||(o=!0),o&&a&&r.push(n),e=n.parentNode}return this._elements=r,this},x.prototype.parent=function(t){var e=this.get(0).parentNode,r=i(e,t);return t||(r=!0),r?e:{}},x.prototype.clone=function(t){var e=this.get(0).cloneNode(!0);return this._elements=[e],t?this:e},x.prototype.empty=function(t){var e=this.get(0);if(!e||!e.hasChildNodes)return t?this:e;for(;e.hasChildNodes();)e.removeChild(e.lastChild);return t?this:e},x.prototype.replaceWith=function(t){var e=this.get(0);e.parentNode.replaceChild(t,e)},x.prototype.ready=function(t){document&&p.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",t,!1):window&&p.isFunction(window.addEventListener)?window.addEventListener("load",t,!1):document.onreadystatechange=function(){"complete"===document.readyState&&t()}},t=new o;var N=null,j=function(r){N&&clearTimeout(N),N=setTimeout(function(){var n=e.dom(r.target).get(0);t.dom(n).toStorage()},t.options.timeout)},k=function(e){e.preventDefault();var r=t.dom(this).getOptions();t.remove(r.data,r)},E=function(e){e.preventDefault();var r=t.dom(this).getOptions();if(!r||!r["action-push"])return!1;var n=r["action-push"].split(":"),o=n[0]||null,i=n[1]||null;t.push(o,i,r)},C=function(e){e.preventDefault();var r=t.dom(this).getOptions();return!(!r||!r["action-remove"])&&void t.remove(r["action-remove"],r)},D=null,T=function(){D&&clearTimeout(D),D=setTimeout(function(){t.registerDependencies(),J()},t.options.timeoutDOM)};e=new x,t.w=e;var J=function(){e.dom("body").on("DOMSubtreeModified",T),e.dom("[way-data]").on("input change",j),e.dom("[way-clear]").on("click",k),e.dom("[way-action-remove]").on("click",C),e.dom("[way-action-push]").on("click",E)};return e.ready(function(){J(),t.restore(),t.setDefaults(),t.registerDependencies(),t.updateDependencies()}),t});